<ng-form name="partyEditGrantForm">
  <scroll-float>
    <fieldset class="clean">
      <div class="col-desktop-9 col-tablet-4 col-mobile-3">
        <button ng-click="partyEditGrantForm.saveAll()" class="green" ng-disabled="partyEditGrantForm.$pristine" class="col-desktop-1 col-tablet-1 col-mobile-1">Save</button>
        <button ng-click="partyEditGrantForm.resetAll()" class="yellow" ng-disabled="partyEditGrantForm.$pristine || partyEditGrantForm.$submitted" class="col-desktop-1 col-tablet-1 col-mobile-1">Revert</button>
      </div>
      <auth-search-form principal="child" placeholder-text="{{::'auth.search.grant.legend' | message}}" class="col-desktop-6 col-tablet-5 col-mobile-3"></auth-search-form>
    </fieldset>
  </scroll-float>
  <fieldset ng-show="partyEditGrantForm.data.length > 0" style="border:none;">
    <div class="affiliatediv">
      <legend message="auth.grant.legend"></legend>
    </div>
    <article ng-repeat="auth in partyEditGrantForm.data track by auth.party.id" id="auth-{{::auth.party.id}}" ng-if="getClass(auth.expires)" class="permission-auth cf peg anchor clearfix">
      <div class="col">
        <div class="col-desktop-1 col-tablet-1 col-mobile-1">
          <figure class="figure-avatar" ng-class="::{inst: auth.party.institution}">
            <img ng-src="{{::auth.party.avatarRoute()}}">
          </figure>
          <button ng-click="authGrantForm.deny()" class="icon mini trash"></button>
        </div>

        <div class="col-desktop-14 col-tablet-8 col-mobile-5 permission-auth-right">
          <div class="permission-heading">
            <a ng-href="{{::auth.party.route()}}" class="permission-auth-username" ng-bind="::auth.party.name"></a><wbr>
            <span class="permission-auth-email" ng-if="::!!auth.party.email" ng-bind="::auth.party.email"></span> 
            <span ng-if="!(auth.member || auth.site)" class="permission-auth-pending" message="auth.pending"></span>
          </div>

          <div>
            <auth-grant-form></auth-grant-form>
          </div>
        </div>
      </div>
    </article>
    <div id="expiredaff" class="affiliatediv">
      <legend message="auth.grant.expired.legend"></legend>
    </div>
    <article ng-repeat="auth in partyEditGrantForm.data track by auth.party.id" id="auth-{{::auth.party.id}}" ng-if="!getClass(auth.expires)" class="permission-auth cf peg anchor clearfix">
      <div class="col">
        <div class="col-desktop-1 col-tablet-1 col-mobile-1">
          <figure class="figure-avatar" ng-class="::{inst: auth.party.institution}">
            <img ng-src="{{::auth.party.avatarRoute()}}">
          </figure>
          <button ng-click="authGrantForm.deny()" class="icon mini trash"></button>
        </div>

        <div class="col-desktop-14 col-tablet-8 col-mobile-5 permission-auth-right">
          <div class="permission-heading">
            <a ng-href="{{::auth.party.route()}}" class="permission-auth-username" ng-bind="::auth.party.name"></a><wbr>
            <span class="permission-auth-email" ng-if="::!!auth.party.email" ng-bind="::auth.party.email"></span> 
            <span ng-if="!(auth.member || auth.site)" class="permission-auth-pending" message="auth.pending"></span>
          </div>

          <div>
            <auth-grant-form></auth-grant-form>
          </div>
        </div>
      </div>
    </article>
  </fieldset>
</ng-form>
